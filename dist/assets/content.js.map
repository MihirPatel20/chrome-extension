{"version":3,"file":"content.js","sources":["../../src/content.tsx"],"sourcesContent":["import React from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { Palette, Moon, Sun } from 'lucide-react';\n\nconst themes = {\n  dark: {\n    '--ytmusic-background': '#030303',\n    '--ytmusic-nav-bar': '#030303',\n    '--ytmusic-player-bar': '#000000',\n    '--ytmusic-text': '#ffffff',\n    '--ytmusic-subtitle': '#aaaaaa',\n  },\n  light: {\n    '--ytmusic-background': '#ffffff',\n    '--ytmusic-nav-bar': '#ffffff',\n    '--ytmusic-player-bar': '#f5f5f5',\n    '--ytmusic-text': '#030303',\n    '--ytmusic-subtitle': '#606060',\n  },\n  sunset: {\n    '--ytmusic-background': '#2d1b2d',\n    '--ytmusic-nav-bar': '#1a0f1a',\n    '--ytmusic-player-bar': '#1a0f1a',\n    '--ytmusic-text': '#ffd1dc',\n    '--ytmusic-subtitle': '#ffb6c1',\n  }\n};\n\nconst ThemeSwitcher = () => {\n  const [currentTheme, setCurrentTheme] = React.useState('dark');\n  const [isOpen, setIsOpen] = React.useState(false);\n\n  const applyTheme = (themeName: keyof typeof themes) => {\n    const theme = themes[themeName];\n    \n    // Apply theme to YouTube Music elements\n    const app = document.querySelector('ytmusic-app');\n    const navBar = document.querySelector('ytmusic-nav-bar');\n    const playerBar = document.querySelector('ytmusic-player-bar');\n    const mainPanel = document.querySelector('ytmusic-browse-response');\n    const tabBar = document.querySelector('ytmusic-tabs-bar');\n\n    if (app) {\n      app.style.setProperty('--ytmusic-background', theme['--ytmusic-background']);\n      app.style.setProperty('--ytmusic-text', theme['--ytmusic-text']);\n      app.style.setProperty('--ytmusic-subtitle', theme['--ytmusic-subtitle']);\n      app.style.backgroundColor = theme['--ytmusic-background'];\n    }\n\n    if (navBar) {\n      navBar.style.backgroundColor = theme['--ytmusic-nav-bar'];\n    }\n\n    if (playerBar) {\n      playerBar.style.backgroundColor = theme['--ytmusic-player-bar'];\n    }\n\n    if (mainPanel) {\n      mainPanel.style.backgroundColor = theme['--ytmusic-background'];\n      mainPanel.style.color = theme['--ytmusic-text'];\n    }\n\n    if (tabBar) {\n      tabBar.style.backgroundColor = theme['--ytmusic-background'];\n    }\n\n    // Update all text colors\n    document.querySelectorAll('yt-formatted-string, .title').forEach((element) => {\n      (element as HTMLElement).style.color = theme['--ytmusic-text'];\n    });\n\n    document.querySelectorAll('.subtitle').forEach((element) => {\n      (element as HTMLElement).style.color = theme['--ytmusic-subtitle'];\n    });\n\n    setCurrentTheme(themeName);\n    chrome.storage.local.set({ theme: themeName });\n  };\n\n  // Load saved theme on mount\n  React.useEffect(() => {\n    chrome.storage.local.get(['theme'], (result) => {\n      if (result.theme && themes[result.theme as keyof typeof themes]) {\n        applyTheme(result.theme as keyof typeof themes);\n      }\n    });\n  }, []);\n\n  // Set up message listener\n  React.useEffect(() => {\n    const messageListener = (message: any, sender: any, sendResponse: any) => {\n      if (message.type === 'GET_THEME') {\n        sendResponse({ theme: currentTheme });\n        return true;\n      } else if (message.type === 'SET_THEME' && message.theme) {\n        applyTheme(message.theme as keyof typeof themes);\n        sendResponse({ success: true });\n        return true;\n      }\n    };\n\n    chrome.runtime.onMessage.addListener(messageListener);\n    return () => chrome.runtime.onMessage.removeListener(messageListener);\n  }, [currentTheme]);\n\n  // Re-apply theme on navigation\n  React.useEffect(() => {\n    const observer = new MutationObserver(() => {\n      applyTheme(currentTheme as keyof typeof themes);\n    });\n\n    const app = document.querySelector('ytmusic-app');\n    if (app) {\n      observer.observe(app, {\n        childList: true,\n        subtree: true\n      });\n    }\n\n    return () => observer.disconnect();\n  }, [currentTheme]);\n\n  return (\n    <div className=\"fixed right-4 bottom-20 z-[9999]\">\n      <div className=\"relative\">\n        <button\n          onClick={() => setIsOpen(!isOpen)}\n          className=\"w-12 h-12 rounded-full bg-white shadow-lg flex items-center justify-center hover:bg-gray-100 transition-colors\"\n        >\n          <Palette className=\"w-6 h-6 text-gray-700\" />\n        </button>\n\n        {isOpen && (\n          <div className=\"absolute bottom-14 right-0 bg-white rounded-lg shadow-lg p-2 flex flex-col gap-2\">\n            <button\n              onClick={() => {\n                applyTheme('dark');\n                setIsOpen(false);\n              }}\n              className=\"flex items-center gap-2 px-4 py-2 rounded hover:bg-gray-100\"\n            >\n              <Moon className=\"w-4 h-4\" />\n              <span>Dark</span>\n            </button>\n            <button\n              onClick={() => {\n                applyTheme('light');\n                setIsOpen(false);\n              }}\n              className=\"flex items-center gap-2 px-4 py-2 rounded hover:bg-gray-100\"\n            >\n              <Sun className=\"w-4 h-4\" />\n              <span>Light</span>\n            </button>\n            <button\n              onClick={() => {\n                applyTheme('sunset');\n                setIsOpen(false);\n              }}\n              className=\"flex items-center gap-2 px-4 py-2 rounded hover:bg-gray-100\"\n            >\n              <Palette className=\"w-4 h-4\" />\n              <span>Sunset</span>\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Wait for YouTube Music app to be ready\nconst waitForYTMusic = () => {\n  return new Promise((resolve) => {\n    const check = () => {\n      const app = document.querySelector('ytmusic-app');\n      if (app) {\n        resolve(true);\n      } else {\n        setTimeout(check, 100);\n      }\n    };\n    check();\n  });\n};\n\n// Initialize when YouTube Music is ready\nconst initialize = async () => {\n  await waitForYTMusic();\n  \n  const container = document.createElement('div');\n  container.id = 'yt-music-theme-switcher';\n  document.body.appendChild(container);\n  \n  const root = createRoot(container);\n  root.render(<ThemeSwitcher />);\n};\n\ninitialize();"],"names":["themes","ThemeSwitcher","currentTheme","setCurrentTheme","React","isOpen","setIsOpen","applyTheme","themeName","theme","app","navBar","playerBar","mainPanel","tabBar","element","result","messageListener","message","sender","sendResponse","observer","jsxs","jsx","Palette","Moon","Sun","waitForYTMusic","resolve","check","initialize","container","createRoot"],"mappings":"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"}